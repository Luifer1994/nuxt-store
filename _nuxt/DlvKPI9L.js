import{j,r as g,N as C,o as l,c,a as e,E as A,F,z as N,t as k,O as R,P as H,b as y,d as B,A as M,I as U,L as T,H as Z,p as V,f as q,_ as I,Q as z,R as G,S as L,T as K,K as O,u as Q,U as W,V as E}from"./u-GsJcRl.js";import{u as J,a as X,_ as Y}from"./DG6Ki4lV.js";import{a as ee,u as te}from"./DM_smAjS.js";async function ae(a){try{return(await fetch(a,{method:"HEAD"})).ok}catch{return!1}}const D=a=>(V("data-v-13a06f5f"),a=a(),q(),a),se={class:"container mx-auto px-4 mb-5"},oe={class:"lg:col-gap-12 xl:col-gap-16 mt-8 grid grid-cols-1 gap-12 lg:mt-12 lg:grid-cols-5 lg:gap-16"},re={class:"lg:col-span-3 lg:row-end-1"},le={class:"lg:flex lg:items-start"},de={class:"lg:order-2 lg:ml-5"},ce={class:"max-w-xl overflow-hidden rounded-lg group"},ne={key:1,class:"h-full w-full max-w-full object-cover bg-gray-200 animate-pulse"},ie={class:"mt-2 w-full lg:order-1 lg:w-32 lg:flex-shrink-0"},pe={class:"flex flex-row items-start lg:flex-col"},ue=["onClick"],ge={class:"lg:col-span-2 lg:row-span-2 lg:row-end-2"},ve={class:"text-2xl font-bold text-gray-900 sm:text-3xl"},fe=T('<h2 class="mt-8 text-base" data-v-13a06f5f>Tipo de Café</h2><div class="mt-3 flex select-none flex-wrap items-center gap-1" data-v-13a06f5f><label class="" data-v-13a06f5f><input type="radio" name="type" value="Powder" class="peer sr-only" checked data-v-13a06f5f><p class="peer-checked:bg-indigo-600 peer-checked:text-white rounded-lg border px-6 py-2 font-bold" data-v-13a06f5f> Molido </p></label><label class="" data-v-13a06f5f><input type="radio" name="type" value="Whole Bean" class="peer sr-only" data-v-13a06f5f><p class="peer-checked:bg-indigo-600 peer-checked:text-white rounded-lg border px-6 py-2 font-bold" data-v-13a06f5f> Grano Entero </p></label><label class="" data-v-13a06f5f><input type="radio" name="type" value="Ground" class="peer sr-only" data-v-13a06f5f><p class="peer-checked:bg-indigo-600 peer-checked:text-white rounded-lg border px-6 py-2 font-bold" data-v-13a06f5f> Molido </p></label></div><h2 class="mt-8 text-base" data-v-13a06f5f>Elige una suscripción</h2><div class="mt-3 flex select-none flex-wrap items-center gap-1" data-v-13a06f5f><label class="" data-v-13a06f5f><input type="radio" name="subscription" value="4 Meses" class="peer sr-only" data-v-13a06f5f><p class="peer-checked:bg-indigo-600 peer-checked:text-white rounded-lg border px-6 py-2 font-bold" data-v-13a06f5f> 4 Meses </p><span class="mt-1 block text-center text-xs" data-v-13a06f5f>$80/mes</span></label><label class="" data-v-13a06f5f><input type="radio" name="subscription" value="8 Meses" class="peer sr-only" checked data-v-13a06f5f><p class="peer-checked:bg-indigo-600 peer-checked:text-white rounded-lg border px-6 py-2 font-bold" data-v-13a06f5f> 8 Meses </p><span class="mt-1 block text-center text-xs" data-v-13a06f5f>$60/mes</span></label><label class="" data-v-13a06f5f><input type="radio" name="subscription" value="12 Meses" class="peer sr-only" data-v-13a06f5f><p class="peer-checked:bg-indigo-600 peer-checked:text-white rounded-lg border px-6 py-2 font-bold" data-v-13a06f5f> 12 Meses </p><span class="mt-1 block text-center text-xs" data-v-13a06f5f>$40/mes</span></label></div>',4),me={class:"mt-10 flex flex-col items-center justify-between space-y-4 border-t border-b py-4 sm:flex-row sm:space-y-0"},he=D(()=>e("div",{class:"flex items-end"},[e("h1",{class:"text-3xl font-bold"},"$60.50"),e("span",{class:"text-base"},"/mes")],-1)),be={class:"flex items-center space-x-2"},_e={class:"lg:col-span-3"},xe=D(()=>e("div",{class:"border-b border-gray-300"},[e("nav",{class:"flex gap-4"},[e("a",{href:"#",title:"",class:"border-b-2 border-gray-900 py-4 text-sm font-medium hover:border-gray-400 hover:text-gray-800"}," Descripción ")])],-1)),ye={class:"mt-8 flow-root sm:mt-12"},we={class:"text-3xl font-bold"},ke={class:"mt-4"},Ie=j({__name:"ProductDetail",props:{product:{}},setup(a){const{addItem:r,items:p}=J(),{addItem:b,items:v,removeItem:n}=X(),s=a,d=g(0),i=g([]),_=g(""),f=g(1);C(()=>{const t=p.value.find(o=>o.id===s.product.id);t&&(f.value=t.quantity)}),C(async()=>{s.product.images.length>0&&(d.value=0,i.value=await Promise.all(s.product.images.map(async t=>{const o=t.replace(/[\[\]"]/g,"").trim();return await ae(o)?o:"/default-img.jpg"})),_.value=i.value[0])});const m=t=>{t.target.src="/default-img.jpg"},P=()=>{const t={...s.product,quantity:f.value};r(t)},$=(t,o)=>{if(o.stopPropagation(),u(t.id)){n(t.id);return}b(t)},u=t=>v.value.some(o=>o.id===t);return(t,o)=>{const w=Y,S=Z;return l(),c("div",se,[e("div",oe,[e("div",re,[e("div",le,[e("div",de,[e("div",ce,[i.value.length>0?(l(),A(w,{key:0,src:i.value[d.value],alt:t.product.title,class:"h-full w-full max-w-full object-cover transition-all duration-300 group-hover:-rotate-3 group-hover:scale-125",onError:m},null,8,["src","alt"])):(l(),c("div",ne))])]),e("div",ie,[e("div",pe,[(l(!0),c(F,null,N(i.value,(h,x)=>(l(),c("button",{key:x,type:"button",class:M(["flex-0 aspect-square mb-3 h-20 overflow-hidden rounded-lg border-2 group",x===d.value?"border-gray-900":"border-transparent"]),onClick:Re=>d.value=x},[y(w,{class:"h-full w-full object-cover transition-all duration-300 group-hover:-rotate-3 group-hover:scale-125",src:h,alt:`Imagen ${x+1}`,onError:m},null,8,["src","alt"])],10,ue))),128))])])])]),e("div",ge,[e("h1",ve,k(t.product.title),1),fe,e("div",me,[he,e("div",be,[R(e("input",{type:"number",min:"1","onUpdate:modelValue":o[0]||(o[0]=h=>f.value=h),class:"w-16 h-12 rounded border text-center"},null,512),[[H,f.value]]),e("button",{onClick:P,type:"button",class:"inline-flex items-center justify-center rounded-md border-2 border-transparent bg-indigo-600 bg-none px-6 py-3 text-center text-base font-bold text-white transition-all duration-200 ease-in-out focus:shadow hover:bg-indigo-500"},[y(S,{name:"i-heroicons-shopping-bag",class:"w-6 h-6 mr-1"}),B(" Agregar al carrito ")]),e("button",{type:"button",class:M(u(t.product.id)?"text-rose-500":"hover:text-rose-500"),onClick:o[1]||(o[1]=U(h=>$(t.product,h),["stop"]))},[y(S,{name:u(t.product.id)?"i-heroicons-heart-solid":"i-heroicons-heart",class:"h-6 w-6 font-bold"},null,8,["name"])],2)])])]),e("div",_e,[xe,e("div",ye,[e("h1",we,k(t.product.title),1),e("p",ke,k(t.product.description),1)])])])])}}}),Pe=I(Ie,[["__scopeId","data-v-13a06f5f"]]),$e={},Se={class:"container mx-auto px-4 mb-5"},Ce=T('<div class="lg:col-gap-12 xl:col-gap-16 mt-8 grid grid-cols-1 gap-12 lg:mt-12 lg:grid-cols-5 lg:gap-16"><div class="lg:col-span-3 lg:row-end-1"><div class="lg:flex lg:items-start"><div class="lg:order-2 lg:ml-5"><div class="max-w-xl overflow-hidden rounded-lg bg-gray-200 animate-pulse h-64 w-full"></div></div><div class="mt-2 w-full lg:order-1 lg:w-32 lg:flex-shrink-0"><div class="flex flex-row items-start lg:flex-col"><div class="flex-0 aspect-square mb-3 h-20 overflow-hidden rounded-lg border-2 bg-gray-200 animate-pulse"></div><div class="flex-0 aspect-square mb-3 h-20 overflow-hidden rounded-lg border-2 bg-gray-200 animate-pulse"></div><div class="flex-0 aspect-square mb-3 h-20 overflow-hidden rounded-lg border-2 bg-gray-200 animate-pulse"></div></div></div></div></div><div class="lg:col-span-2 lg:row-span-2 lg:row-end-2"><div class="h-8 w-3/4 bg-gray-200 animate-pulse mb-4"></div><div class="h-6 w-1/2 bg-gray-200 animate-pulse"></div></div><div class="lg:col-span-3"><div class="border-b border-gray-300"><nav class="flex gap-4"><div class="h-8 w-1/4 bg-gray-200 animate-pulse"></div></nav></div><div class="mt-8 flow-root sm:mt-12"><div class="h-8 w-1/2 bg-gray-200 animate-pulse mb-4"></div><div class="h-6 w-full bg-gray-200 animate-pulse mb-2"></div><div class="h-6 w-full bg-gray-200 animate-pulse mb-2"></div><div class="h-6 w-full bg-gray-200 animate-pulse"></div></div></div></div>',1),Me=[Ce];function Ee(a,r){return l(),c("div",Se,Me)}const je=I($e,[["render",Ee]]),Ae=z("productStore",{state:()=>({products:[],selectedProduct:{}}),actions:{setProducts(a){this.products=a},setSelectedProduct(a){this.selectedProduct=a}}}),Be=()=>{const a=Ae(),{products:r,selectedProduct:p}=G(a);return{products:r,selectedProduct:p,getProductById:async v=>{try{const n=await ee(v),s={...n,images:[n.image]};a.setSelectedProduct(s)}catch{throw new Error("Error al obtener el producto")}}}},Te=a=>(V("data-v-6210e906"),a=a(),q(),a),Ve={key:1,class:"skeleton-container"},qe={key:2,class:"alert-container"},De=Te(()=>e("div",{class:"flex flex-col items-center justify-center p-6 mb-4 text-lg text-red-800 border border-red-300 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 dark:border-red-800",role:"alert"},[e("svg",{class:"flex-shrink-0 inline w-6 h-6 mb-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})]),e("span",{class:"sr-only"},"Info"),e("div",{class:"text-center"},[e("span",{class:"font-medium"},"¡Alerta de peligro!"),B(" Producto no encontrado o falla al cargar. Redirigiendo a la página principal... ")])],-1)),Fe=[De],Ne=j({__name:"[id]",async setup(a){let r,p;const b=L(),v=K(),{getProductById:n,selectedProduct:s}=Be(),d=g(!0),i=g(null),{id:_}=b.params,{data:f,error:m}=([r,p]=O(()=>te(`product:${_}`,()=>n(_))),r=await r,p(),r);return m.value?(i.value=m.value,d.value=!1,setTimeout(()=>{v.push("/")},4e3)):(d.value=!1,Q({title:s.value.title+" | "+W().public.titleTemplate,meta:[{name:"description",content:s.value.description},{property:"og:title",content:s.value.title},{property:"og:description",content:s.value.description},{property:"og:image",content:s.value.images[0]||"/default-img.jpg"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:s.value.title},{name:"twitter:description",content:s.value.description},{name:"twitter:image",content:s.value.images[0]||"/default-img.jpg"}]})),(P,$)=>{var u;return l(),c("div",null,[(u=E(s))!=null&&u.id?(l(),A(Pe,{key:0,product:E(s)},null,8,["product"])):d.value?(l(),c("div",Ve,[y(je)])):(l(),c("div",qe,Fe))])}}}),ze=I(Ne,[["__scopeId","data-v-6210e906"]]);export{ze as default};
